{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\karmo\\\\Downloads\\\\Ecommerce Website\\\\MERN-Ecommerce-main\\\\frontend\\\\src\\\\pages\\\\LoginPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Form, Button, InputGroup, Col, Card, FloatingLabel } from 'react-bootstrap';\nimport { loginUser } from '../actions/userActions';\nimport { USER_LOGIN_SUCCESS } from '../constants/userConstants';\nimport axios from 'axios';\nimport Loader from '../components/Loader';\nimport Message from '../components/Message';\nimport FormContainer from '../components/FormContainer';\nimport SocialLoginOptions from '../components/SocialLoginOptions';\nimport '../styles/login-register.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LoginPage = _ref => {\n  _s();\n  let {\n    location,\n    history\n  } = _ref;\n  const [authFailedMsg, setAuthFailedMsg] = useState(''); // if user tried to login with different social account after registering with some other social account\n  const [showRedirectMsg, setShowRedirectMsg] = useState(false);\n  const [forgotPassword, setForgotPassword] = useState(false);\n  const [showLoading, setShowLoading] = useState(false); // to display loader after user submits the email to reset password\n  const [emailSent, setEmailSent] = useState(false); //to display a message that email is sent to reset password\n\n  const [type, setType] = useState('password');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const dispatch = useDispatch();\n  const redirect = location.search ? location.search.split('=')[1] : '';\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    loading,\n    userInfo,\n    error\n  } = userLogin;\n  const storedInfo = JSON.parse(localStorage.getItem('userInfo'));\n  useEffect(() => {\n    if (!location.search.includes('success') && userInfo) history.push(redirect);\n  }, [history, redirect, location, userInfo]);\n  useEffect(() => {\n    if (location.search.includes('login=failed')) {\n      const errorCodeQuery = location.search.split('&')[1];\n      const errorCode = errorCodeQuery.split('=')[1];\n      switch (errorCode) {\n        case '0':\n          setAuthFailedMsg('It looks like you had registered using a Google Account');\n          break;\n        case '1':\n          setAuthFailedMsg('It looks like you had registered using a Github Account');\n          break;\n        case '2':\n          setAuthFailedMsg('It looks like you had registered using a Twitter Account');\n          break;\n        case '3':\n          setAuthFailedMsg('It looks like you had registered using a LinkedIn Account');\n          break;\n        default:\n          return;\n      }\n    }\n  }, [location.search]);\n\n  // if redirected to login page after refresh token expired, show a message\n  useEffect(() => {\n    const flag = localStorage.getItem('redirectLogin');\n    if (flag && flag === 'true') {\n      setShowRedirectMsg(true);\n    } else {\n      setShowRedirectMsg(false);\n    }\n  }, []);\n\n  // if the passport social login is successful, get the user's data and store in redux store\n  useEffect(() => {\n    // check for url params\n    if (window.location.search.includes('success')) {\n      const queries = window.location.search.split('&');\n      const isSuccess = queries[0].split('=')[1] === 'success';\n      const id = queries[1].split('=')[1];\n\n      // if successful login\n      if (isSuccess) {\n        // get user data and dispatch login success\n        axios.post('/api/users/passport/data', {\n          id\n        }).then(_ref2 => {\n          let {\n            data\n          } = _ref2;\n          const {\n            id,\n            email,\n            name,\n            isAdmin,\n            isConfirmed,\n            avatar\n          } = data;\n          const userData = {\n            id,\n            email,\n            name,\n            isAdmin,\n            isConfirmed,\n            avatar,\n            isSocialLogin: true\n          };\n\n          // login user in frontend\n          dispatch({\n            type: USER_LOGIN_SUCCESS,\n            payload: userData\n          });\n          // update the local storage\n          localStorage.setItem('userInfo', JSON.stringify(userData));\n\n          // remove variable that was meant to promt email verification if it is a social login\n          localStorage.removeItem('promptEmailVerfication');\n          history.push('/shipping'); // move to shipping page by default\n        });\n      }\n    }\n  }, [dispatch, history, redirect]);\n  useEffect(() => {\n    // if redirected from confirmation page, fill email and let user fill the password field\n    if (storedInfo && storedInfo.email && localStorage.getItem('fillEmailOnLoginPage') === 'true') {\n      localStorage.removeItem('fillEmailOnLoginPage');\n      setEmail(storedInfo.email);\n    }\n  }, [storedInfo]);\n\n  // to show/hide the password field content\n  const showHide = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setType(type === 'password' ? 'text' : 'password');\n  };\n\n  // login user from email and password\n  const handleSubmit = e => {\n    e.preventDefault();\n    dispatch(loginUser(email, password));\n  };\n\n  // to send a mail for resetting password if forgotted\n  const handleEmailSubmit = async e => {\n    e.preventDefault();\n    setShowLoading(true);\n\n    // send the mail to the registered user\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post('/api/users/reset', {\n      email\n    }, config);\n    if (data) {\n      setShowLoading(false);\n      setEmailSent(true);\n      // store the name in localstorage\n      localStorage.setItem('EcommerceUserName', data.name); // store the user name, so that we can use it in the profile page to ask them to confirm email\n    }\n  };\n\n  // there are 2 sorts of forms to be shown, one when resetting password, and other when normal login\n  if (!forgotPassword) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(FormContainer, {\n        children: [authFailedMsg && /*#__PURE__*/_jsxDEV(Message, {\n          variant: \"danger\",\n          dismissible: true,\n          children: authFailedMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-inner-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-heading\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              style: {\n                background: 'ghostwhite',\n                boxShadow: '0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\n                WebkitBoxShadow: '0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\n                MozBoxShadow: '0px 0px 9px 0px rgba(0, 0, 0, 0.2)'\n              },\n              children: \"Sign In\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              onClick: () => history.push('/register'),\n              children: \"Sign Up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 7\n          }, this), error && /*#__PURE__*/_jsxDEV(Message, {\n            dismissible: true,\n            variant: \"danger\",\n            duration: 10,\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 8\n          }, this), showRedirectMsg && /*#__PURE__*/_jsxDEV(Message, {\n            dismissible: true,\n            variant: \"info\",\n            duration: 10,\n            children: \"Your session has expired. Please login again.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 8\n          }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 8\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                controlId: \"email\",\n                children: /*#__PURE__*/_jsxDEV(FloatingLabel, {\n                  controlId: \"emailinput\",\n                  label: \"Email address\",\n                  className: \"mb-3\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    required: true,\n                    size: \"lg\",\n                    placeholder: \"Enter Email Address\",\n                    type: \"email\",\n                    value: email,\n                    onChange: e => setEmail(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                children: /*#__PURE__*/_jsxDEV(InputGroup, {\n                  children: /*#__PURE__*/_jsxDEV(FloatingLabel, {\n                    controlId: \"passwordinput\",\n                    label: \"Password\",\n                    style: {\n                      display: 'flex',\n                      width: '100%'\n                    },\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                      required: true,\n                      size: \"lg\",\n                      type: type,\n                      placeholder: \"Enter your password\",\n                      value: password,\n                      style: {\n                        borderRight: 'none'\n                      },\n                      onChange: e => setPassword(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 259,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group-append\",\n                      children: /*#__PURE__*/_jsxDEV(InputGroup.Text, {\n                        onClick: showHide,\n                        style: {\n                          fontSize: '1rem',\n                          height: '100%',\n                          marginLeft: '-0.5em',\n                          background: 'transparent',\n                          borderLeft: 'none'\n                        },\n                        children: type === 'text' ? /*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"far fa-eye-slash\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 287,\n                          columnNumber: 16\n                        }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"far fa-eye\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 289,\n                          columnNumber: 16\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 275,\n                        columnNumber: 14\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 13\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                style: {\n                  display: 'flex'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  type: \"button\",\n                  variant: \"link\",\n                  style: {\n                    marginTop: '-1em',\n                    padding: '0'\n                  },\n                  onClick: () => setForgotPassword(true),\n                  children: \"Forgot Password?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  className: \"ms-auto\",\n                  style: {\n                    padding: '0.5em 1em',\n                    width: '8rem'\n                  },\n                  children: \"Login\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(SocialLoginOptions, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(FormContainer, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-inner-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-heading\",\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              style: {\n                background: 'ghostwhite',\n                boxShadow: '0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\n                WebkitBoxShadow: '0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\n                MozBoxShadow: '0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\n                cursor: 'default'\n              },\n              children: \"Reset Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 7\n          }, this), showLoading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 8\n          }, this) : emailSent ? /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(Card.Body, {\n              className: \"pl-0\",\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                children: \"Email Sent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                children: \"Please use the link sent to your email and reset your password right away!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 8\n          }, this) : /*#__PURE__*/_jsxDEV(Form, {\n            onSubmit: handleEmailSubmit,\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              controlId: \"email\",\n              children: /*#__PURE__*/_jsxDEV(FloatingLabel, {\n                controlId: \"emailinput\",\n                label: \"Email address\",\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                  size: \"lg\",\n                  placeholder: \"Enter Email Address\",\n                  type: \"email\",\n                  value: email,\n                  onChange: e => setEmail(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              style: {\n                display: 'flex'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                type: \"button\",\n                variant: \"link\",\n                className: \"remember-password\",\n                style: {\n                  marginTop: '-1em',\n                  padding: '0'\n                },\n                onClick: () => setForgotPassword(false),\n                children: \"I remember my password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                className: \"ms-auto\",\n                style: {\n                  padding: '0.5em 1em',\n                  width: '8rem'\n                },\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(SocialLoginOptions, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  }\n};\n_s(LoginPage, \"8wQiw60iaC+qUzBVFA/uiCJodMk=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","Form","Button","InputGroup","Col","Card","FloatingLabel","loginUser","USER_LOGIN_SUCCESS","axios","Loader","Message","FormContainer","SocialLoginOptions","jsxDEV","_jsxDEV","Fragment","_Fragment","LoginPage","_ref","_s","location","history","authFailedMsg","setAuthFailedMsg","showRedirectMsg","setShowRedirectMsg","forgotPassword","setForgotPassword","showLoading","setShowLoading","emailSent","setEmailSent","type","setType","email","setEmail","password","setPassword","dispatch","redirect","search","split","userLogin","state","loading","userInfo","error","storedInfo","JSON","parse","localStorage","getItem","includes","push","errorCodeQuery","errorCode","flag","window","queries","isSuccess","id","post","then","_ref2","data","name","isAdmin","isConfirmed","avatar","userData","isSocialLogin","payload","setItem","stringify","removeItem","showHide","e","preventDefault","stopPropagation","handleSubmit","handleEmailSubmit","config","headers","children","variant","dismissible","fileName","_jsxFileName","lineNumber","columnNumber","className","style","background","boxShadow","WebkitBoxShadow","MozBoxShadow","onClick","duration","onSubmit","Group","controlId","label","Control","required","size","placeholder","value","onChange","target","display","width","borderRight","Text","fontSize","height","marginLeft","borderLeft","marginTop","padding","cursor","Body","Title","_c","$RefreshReg$"],"sources":["C:/Users/karmo/Downloads/Ecommerce Website/MERN-Ecommerce-main/frontend/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n\tForm,\n\tButton,\n\tInputGroup,\n\tCol,\n\tCard,\n\tFloatingLabel,\n} from 'react-bootstrap';\nimport { loginUser } from '../actions/userActions';\nimport { USER_LOGIN_SUCCESS } from '../constants/userConstants';\nimport axios from 'axios';\nimport Loader from '../components/Loader';\nimport Message from '../components/Message';\nimport FormContainer from '../components/FormContainer';\nimport SocialLoginOptions from '../components/SocialLoginOptions';\nimport '../styles/login-register.css';\n\nconst LoginPage = ({ location, history }) => {\n\tconst [authFailedMsg, setAuthFailedMsg] = useState(''); // if user tried to login with different social account after registering with some other social account\n\tconst [showRedirectMsg, setShowRedirectMsg] = useState(false);\n\tconst [forgotPassword, setForgotPassword] = useState(false);\n\tconst [showLoading, setShowLoading] = useState(false); // to display loader after user submits the email to reset password\n\tconst [emailSent, setEmailSent] = useState(false); //to display a message that email is sent to reset password\n\n\tconst [type, setType] = useState('password');\n\tconst [email, setEmail] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst dispatch = useDispatch();\n\tconst redirect = location.search ? location.search.split('=')[1] : '';\n\tconst userLogin = useSelector((state) => state.userLogin);\n\tconst { loading, userInfo, error } = userLogin;\n\tconst storedInfo = JSON.parse(localStorage.getItem('userInfo'));\n\n\tuseEffect(() => {\n\t\tif (!location.search.includes('success') && userInfo)\n\t\t\thistory.push(redirect);\n\t}, [history, redirect, location, userInfo]);\n\n\tuseEffect(() => {\n\t\tif (location.search.includes('login=failed')) {\n\t\t\tconst errorCodeQuery = location.search.split('&')[1];\n\t\t\tconst errorCode = errorCodeQuery.split('=')[1];\n\t\t\tswitch (errorCode) {\n\t\t\t\tcase '0':\n\t\t\t\t\tsetAuthFailedMsg(\n\t\t\t\t\t\t'It looks like you had registered using a Google Account'\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '1':\n\t\t\t\t\tsetAuthFailedMsg(\n\t\t\t\t\t\t'It looks like you had registered using a Github Account'\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '2':\n\t\t\t\t\tsetAuthFailedMsg(\n\t\t\t\t\t\t'It looks like you had registered using a Twitter Account'\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '3':\n\t\t\t\t\tsetAuthFailedMsg(\n\t\t\t\t\t\t'It looks like you had registered using a LinkedIn Account'\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}, [location.search]);\n\n\t// if redirected to login page after refresh token expired, show a message\n\tuseEffect(() => {\n\t\tconst flag = localStorage.getItem('redirectLogin');\n\t\tif (flag && flag === 'true') {\n\t\t\tsetShowRedirectMsg(true);\n\t\t} else {\n\t\t\tsetShowRedirectMsg(false);\n\t\t}\n\t}, []);\n\n\t// if the passport social login is successful, get the user's data and store in redux store\n\tuseEffect(() => {\n\t\t// check for url params\n\t\tif (window.location.search.includes('success')) {\n\t\t\tconst queries = window.location.search.split('&');\n\t\t\tconst isSuccess = queries[0].split('=')[1] === 'success';\n\t\t\tconst id = queries[1].split('=')[1];\n\n\t\t\t// if successful login\n\t\t\tif (isSuccess) {\n\t\t\t\t// get user data and dispatch login success\n\t\t\t\taxios\n\t\t\t\t\t.post('/api/users/passport/data', {\n\t\t\t\t\t\tid,\n\t\t\t\t\t})\n\t\t\t\t\t.then(({ data }) => {\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tisAdmin,\n\t\t\t\t\t\t\tisConfirmed,\n\t\t\t\t\t\t\tavatar,\n\t\t\t\t\t\t} = data;\n\t\t\t\t\t\tconst userData = {\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tisAdmin,\n\t\t\t\t\t\t\tisConfirmed,\n\t\t\t\t\t\t\tavatar,\n\t\t\t\t\t\t\tisSocialLogin: true,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// login user in frontend\n\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\ttype: USER_LOGIN_SUCCESS,\n\t\t\t\t\t\t\tpayload: userData,\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// update the local storage\n\t\t\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\t\t'userInfo',\n\t\t\t\t\t\t\tJSON.stringify(userData)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// remove variable that was meant to promt email verification if it is a social login\n\t\t\t\t\t\tlocalStorage.removeItem('promptEmailVerfication');\n\t\t\t\t\t\thistory.push('/shipping'); // move to shipping page by default\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [dispatch, history, redirect]);\n\n\tuseEffect(() => {\n\t\t// if redirected from confirmation page, fill email and let user fill the password field\n\t\tif (\n\t\t\tstoredInfo &&\n\t\t\tstoredInfo.email &&\n\t\t\tlocalStorage.getItem('fillEmailOnLoginPage') === 'true'\n\t\t) {\n\t\t\tlocalStorage.removeItem('fillEmailOnLoginPage');\n\t\t\tsetEmail(storedInfo.email);\n\t\t}\n\t}, [storedInfo]);\n\n\t// to show/hide the password field content\n\tconst showHide = (e) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tsetType(type === 'password' ? 'text' : 'password');\n\t};\n\n\t// login user from email and password\n\tconst handleSubmit = (e) => {\n\t\te.preventDefault();\n\t\tdispatch(loginUser(email, password));\n\t};\n\n\t// to send a mail for resetting password if forgotted\n\tconst handleEmailSubmit = async (e) => {\n\t\te.preventDefault();\n\t\tsetShowLoading(true);\n\n\t\t// send the mail to the registered user\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t};\n\n\t\tconst { data } = await axios.post(\n\t\t\t'/api/users/reset',\n\t\t\t{ email },\n\t\t\tconfig\n\t\t);\n\n\t\tif (data) {\n\t\t\tsetShowLoading(false);\n\t\t\tsetEmailSent(true);\n\t\t\t// store the name in localstorage\n\t\t\tlocalStorage.setItem('EcommerceUserName', data.name); // store the user name, so that we can use it in the profile page to ask them to confirm email\n\t\t}\n\t};\n\n\t// there are 2 sorts of forms to be shown, one when resetting password, and other when normal login\n\tif (!forgotPassword) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<FormContainer>\n\t\t\t\t\t{/* if passport login has failed because user logged in with differrent social account, shoe the error msg */}\n\t\t\t\t\t{authFailedMsg && (\n\t\t\t\t\t\t<Message variant='danger' dismissible>\n\t\t\t\t\t\t\t{authFailedMsg}\n\t\t\t\t\t\t</Message>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className='form-inner-container'>\n\t\t\t\t\t\t<div className='form-heading'>\n\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackground: 'ghostwhite',\n\t\t\t\t\t\t\t\t\tboxShadow:\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\n\t\t\t\t\t\t\t\t\tWebkitBoxShadow:\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\n\t\t\t\t\t\t\t\t\tMozBoxShadow:\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\tSign In\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t<h1 onClick={() => history.push('/register')}>\n\t\t\t\t\t\t\t\tSign Up\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{error && (\n\t\t\t\t\t\t\t<Message dismissible variant='danger' duration={10}>\n\t\t\t\t\t\t\t\t{error}\n\t\t\t\t\t\t\t</Message>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{/* the message when refresh token has expired */}\n\t\t\t\t\t\t{showRedirectMsg && (\n\t\t\t\t\t\t\t<Message dismissible variant='info' duration={10}>\n\t\t\t\t\t\t\t\tYour session has expired. Please login again.\n\t\t\t\t\t\t\t</Message>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Form onSubmit={handleSubmit}>\n\t\t\t\t\t\t\t\t\t<Form.Group controlId='email'>\n\t\t\t\t\t\t\t\t\t\t<FloatingLabel\n\t\t\t\t\t\t\t\t\t\t\tcontrolId='emailinput'\n\t\t\t\t\t\t\t\t\t\t\tlabel='Email address'\n\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\n\t\t\t\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\n\t\t\t\t\t\t\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEmail(e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\n\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t\t\t\t\t<InputGroup>\n\t\t\t\t\t\t\t\t\t\t\t<FloatingLabel\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolId='passwordinput'\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Password'\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter your password'\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetPassword(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='input-group-append'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InputGroup.Text\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={showHide}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'-0.5em',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'transparent',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderLeft: 'none',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{type === 'text' ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</InputGroup.Text>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\n\t\t\t\t\t\t\t\t\t\t</InputGroup>\n\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t\t<Col\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\t\t\t\tvariant='link'\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\tmarginTop: '-1em',\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0',\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetForgotPassword(true)\n\t\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\t\tForgot Password?\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\t\t\t\t\tclassName='ms-auto'\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0.5em 1em',\n\t\t\t\t\t\t\t\t\t\t\t\twidth: '8rem',\n\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\tLogin\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t\t<SocialLoginOptions />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</FormContainer>\n\t\t\t</>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<FormContainer>\n\t\t\t\t\t<div className='form-inner-container'>\n\t\t\t\t\t\t<div className='form-heading'>\n\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackground: 'ghostwhite',\n\t\t\t\t\t\t\t\t\tboxShadow:\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\n\t\t\t\t\t\t\t\t\tWebkitBoxShadow:\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\n\t\t\t\t\t\t\t\t\tMozBoxShadow:\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\n\t\t\t\t\t\t\t\t\tcursor: 'default',\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\tReset Password\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{showLoading ? (\n\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t) : emailSent ? (\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Card.Body className='pl-0'>\n\t\t\t\t\t\t\t\t\t<Card.Title>Email Sent</Card.Title>\n\t\t\t\t\t\t\t\t\t<Card.Text>\n\t\t\t\t\t\t\t\t\t\tPlease use the link sent to your email\n\t\t\t\t\t\t\t\t\t\tand reset your password right away!\n\t\t\t\t\t\t\t\t\t</Card.Text>\n\t\t\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Form onSubmit={handleEmailSubmit}>\n\t\t\t\t\t\t\t\t<Form.Group controlId='email'>\n\t\t\t\t\t\t\t\t\t<FloatingLabel\n\t\t\t\t\t\t\t\t\t\tcontrolId='emailinput'\n\t\t\t\t\t\t\t\t\t\tlabel='Email address'\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\n\t\t\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\n\t\t\t\t\t\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetEmail(e.target.value)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\n\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t<Col\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\t\t\tvariant='link'\n\t\t\t\t\t\t\t\t\t\tclassName='remember-password'\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tmarginTop: '-1em',\n\t\t\t\t\t\t\t\t\t\t\tpadding: '0',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tsetForgotPassword(false)\n\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\tI remember my password\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\t\t\t\tclassName='ms-auto'\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tpadding: '0.5em 1em',\n\t\t\t\t\t\t\t\t\t\t\twidth: '8rem',\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t<SocialLoginOptions />\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</FormContainer>\n\t\t\t</>\n\t\t);\n\t}\n};\n\nexport default LoginPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}